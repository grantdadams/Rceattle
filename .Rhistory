#                               random_rec = FALSE, # No random recruitment
#                               msmMode = 0, # Single species mode
#                               phase = "default",
#                               verbose = 1)
#
#
#
# # For the a multispecies model starting from the single species parameters, the following can be specified to load the data:
# data("BS2017MS") # Note: the only difference is the residual mortality (M1_base) is lower
# BS2017MS$est_M1 <- c(1,1,1) # Estimate residual M
# BS2017MS$projyr <- 2060
# ms_run <- Rceattle::fit_mod(data_list = BS2017MS,
#                             inits = ss_run_M$estimated_params, # Initial parameters from single species ests
#                             file = NULL, # Don't save
#                             estimateMode = 1, # Estimate hindcast only
#                             niter = 3, # 10 iterations around population and predation dynamics
#                             random_rec = FALSE, # No random recruitment
#                             msmMode = 1, # MSVPA based
#                             suitMode = 0, # empirical suitability
#                             verbose = 1)
#
# # We can plot both runs as well:
# mod_list <- list(ss_run, ss_run_M, ms_run)
# mod_names <- c("SS", "SS-M", "MS")
#
# # Plot biomass trajectory
# plot_biomass(Rceattle = mod_list, model_names = mod_names)
# plot_recruitment(Rceattle = mod_list, model_names = mod_names, add_ci = TRUE)
################################################
# Alternative harvest control rules
################################################
# -- NPFMC Tier 3
ss_run_Tier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$SPRlimit/ss_run_Tier3$quantities$SPR0
ss_run_dynamicTier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
DynamicHCR = TRUE, # Use dynamic reference points
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$DynamicSPR0 == ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_dynamicTier3$quantities$DynamicSPR0
# Good
ss_run_Tier3$quantities$SPR0 == ss_run_dynamicTier3$quantities$SPR0
ss_run_dynamicTier3$quantities$SPR0
#good
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
# Somethings off there
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2060
# Write data to excel
Rceattle::write_data(data_list = BS2017SS, file = "BS2017SS.xlsx")
# Change the data how you want in excel
# Read the data back in
mydata <- Rceattle::read_data( file = "BS2017SS.xlsx")
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
mydata$fleet_control$proj_F_prop <-rep(1,7)
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 1, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
# # Estimate single-species and estimate M
# mydata_M <- mydata
# mydata_M$est_M1 <- c(1,1,1)
# ss_run_M <- Rceattle::fit_mod(data_list = mydata_M,
#                               inits = ss_run$estimated_params, # Initial parameters = 0
#                               file = NULL, # Don't save
#                               estimateMode = 1, # Estimate hindcast only
#                               random_rec = FALSE, # No random recruitment
#                               msmMode = 0, # Single species mode
#                               phase = "default",
#                               verbose = 1)
#
#
#
# # For the a multispecies model starting from the single species parameters, the following can be specified to load the data:
# data("BS2017MS") # Note: the only difference is the residual mortality (M1_base) is lower
# BS2017MS$est_M1 <- c(1,1,1) # Estimate residual M
# BS2017MS$projyr <- 2060
# ms_run <- Rceattle::fit_mod(data_list = BS2017MS,
#                             inits = ss_run_M$estimated_params, # Initial parameters from single species ests
#                             file = NULL, # Don't save
#                             estimateMode = 1, # Estimate hindcast only
#                             niter = 3, # 10 iterations around population and predation dynamics
#                             random_rec = FALSE, # No random recruitment
#                             msmMode = 1, # MSVPA based
#                             suitMode = 0, # empirical suitability
#                             verbose = 1)
#
# # We can plot both runs as well:
# mod_list <- list(ss_run, ss_run_M, ms_run)
# mod_names <- c("SS", "SS-M", "MS")
#
# # Plot biomass trajectory
# plot_biomass(Rceattle = mod_list, model_names = mod_names)
# plot_recruitment(Rceattle = mod_list, model_names = mod_names, add_ci = TRUE)
################################################
# Alternative harvest control rules
################################################
# -- NPFMC Tier 3
ss_run_Tier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$SPRlimit/ss_run_Tier3$quantities$SPR0
ss_run_dynamicTier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
DynamicHCR = TRUE, # Use dynamic reference points
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$DynamicSPR0 == ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_dynamicTier3$quantities$DynamicSPR0
# Good
ss_run_Tier3$quantities$SPR0 == ss_run_dynamicTier3$quantities$SPR0
ss_run_dynamicTier3$quantities$SPR0
#good
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
# Somethings off there
ss_run_Tier3$quantities$NByage0[1,,]
library(Rceattle)
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2060
# Write data to excel
Rceattle::write_data(data_list = BS2017SS, file = "BS2017SS.xlsx")
# Change the data how you want in excel
# Read the data back in
mydata <- Rceattle::read_data( file = "BS2017SS.xlsx")
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
mydata$fleet_control$proj_F_prop <-rep(1,7)
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 1, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
# # Estimate single-species and estimate M
# mydata_M <- mydata
# mydata_M$est_M1 <- c(1,1,1)
# ss_run_M <- Rceattle::fit_mod(data_list = mydata_M,
#                               inits = ss_run$estimated_params, # Initial parameters = 0
#                               file = NULL, # Don't save
#                               estimateMode = 1, # Estimate hindcast only
#                               random_rec = FALSE, # No random recruitment
#                               msmMode = 0, # Single species mode
#                               phase = "default",
#                               verbose = 1)
#
#
#
# # For the a multispecies model starting from the single species parameters, the following can be specified to load the data:
# data("BS2017MS") # Note: the only difference is the residual mortality (M1_base) is lower
# BS2017MS$est_M1 <- c(1,1,1) # Estimate residual M
# BS2017MS$projyr <- 2060
# ms_run <- Rceattle::fit_mod(data_list = BS2017MS,
#                             inits = ss_run_M$estimated_params, # Initial parameters from single species ests
#                             file = NULL, # Don't save
#                             estimateMode = 1, # Estimate hindcast only
#                             niter = 3, # 10 iterations around population and predation dynamics
#                             random_rec = FALSE, # No random recruitment
#                             msmMode = 1, # MSVPA based
#                             suitMode = 0, # empirical suitability
#                             verbose = 1)
#
# # We can plot both runs as well:
# mod_list <- list(ss_run, ss_run_M, ms_run)
# mod_names <- c("SS", "SS-M", "MS")
#
# # Plot biomass trajectory
# plot_biomass(Rceattle = mod_list, model_names = mod_names)
# plot_recruitment(Rceattle = mod_list, model_names = mod_names, add_ci = TRUE)
################################################
# Alternative harvest control rules
################################################
# -- NPFMC Tier 3
ss_run_Tier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$SPRlimit/ss_run_Tier3$quantities$SPR0
ss_run_dynamicTier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
DynamicHCR = TRUE, # Use dynamic reference points
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$DynamicSPR0 == ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_dynamicTier3$quantities$DynamicSPR0
# Good
ss_run_Tier3$quantities$SPR0 == ss_run_dynamicTier3$quantities$SPR0
ss_run_dynamicTier3$quantities$SPR0
#good
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
# Somethings off there
ss_run_Tier3$quantities$NByage0[1,,]
ss_run_Tier3$quantities$DynamicNByage0[1,,]
ss_run_Tier3$quantities$NByage0[1,,]
ss_run_Tier3$quantities$NByage0[1,,1:10]
ss_run_Tier3$quantities$NByage0[1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[0,1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[1,1,,1:10]
ss_run_Tier3$quantities$NByage0[0,1,,1:10]
ss_run_Tier3$quantities$NByage0[1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[1,1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[2,1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[3,1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[1,1,,1:10]
library(Rceattle)
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2060
# Write data to excel
Rceattle::write_data(data_list = BS2017SS, file = "BS2017SS.xlsx")
# Change the data how you want in excel
# Read the data back in
mydata <- Rceattle::read_data( file = "BS2017SS.xlsx")
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
mydata$fleet_control$proj_F_prop <-rep(1,7)
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 1, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
# # Estimate single-species and estimate M
# mydata_M <- mydata
# mydata_M$est_M1 <- c(1,1,1)
# ss_run_M <- Rceattle::fit_mod(data_list = mydata_M,
#                               inits = ss_run$estimated_params, # Initial parameters = 0
#                               file = NULL, # Don't save
#                               estimateMode = 1, # Estimate hindcast only
#                               random_rec = FALSE, # No random recruitment
#                               msmMode = 0, # Single species mode
#                               phase = "default",
#                               verbose = 1)
#
#
#
# # For the a multispecies model starting from the single species parameters, the following can be specified to load the data:
# data("BS2017MS") # Note: the only difference is the residual mortality (M1_base) is lower
# BS2017MS$est_M1 <- c(1,1,1) # Estimate residual M
# BS2017MS$projyr <- 2060
# ms_run <- Rceattle::fit_mod(data_list = BS2017MS,
#                             inits = ss_run_M$estimated_params, # Initial parameters from single species ests
#                             file = NULL, # Don't save
#                             estimateMode = 1, # Estimate hindcast only
#                             niter = 3, # 10 iterations around population and predation dynamics
#                             random_rec = FALSE, # No random recruitment
#                             msmMode = 1, # MSVPA based
#                             suitMode = 0, # empirical suitability
#                             verbose = 1)
#
# # We can plot both runs as well:
# mod_list <- list(ss_run, ss_run_M, ms_run)
# mod_names <- c("SS", "SS-M", "MS")
#
# # Plot biomass trajectory
# plot_biomass(Rceattle = mod_list, model_names = mod_names)
# plot_recruitment(Rceattle = mod_list, model_names = mod_names, add_ci = TRUE)
################################################
# Alternative harvest control rules
################################################
# -- NPFMC Tier 3
ss_run_Tier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$SPRlimit/ss_run_Tier3$quantities$SPR0
ss_run_dynamicTier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
DynamicHCR = TRUE, # Use dynamic reference points
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$DynamicSPR0 == ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_dynamicTier3$quantities$DynamicSPR0
# Good
ss_run_Tier3$quantities$SPR0 == ss_run_dynamicTier3$quantities$SPR0
ss_run_dynamicTier3$quantities$SPR0
#good
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
# Somethings off there
ss_run_Tier3$quantities$NByage0[1,,1:10]
dim(ss_run_Tier3$quantities$NByage0)
ss_run$quantities$NByage0[1,,1:10]
ss_run_Tier3$quantities$NByage0[2,,1:10]
ss_run_Tier3$quantities$NByage0[3,,1:10]
ss_run_Tier3$quantities$DynamicNByage0[3,,1:10]
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 3, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
library(Rceattle)
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2060
# Write data to excel
Rceattle::write_data(data_list = BS2017SS, file = "BS2017SS.xlsx")
# Change the data how you want in excel
# Read the data back in
mydata <- Rceattle::read_data( file = "BS2017SS.xlsx")
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
mydata$fleet_control$proj_F_prop <-rep(1,7)
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 3, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
ss_run$quantities$NByage0[3,,1:10]
ss_run$quantities$DynamicNByage0[3,,1:10]
ss_run$quantities$DynamicNByage0[1,,1:10]
ss_run$quantities$DynamicNByage0[1,,1:10]
ss_run$quantities$NByage0[1,,1:10]
ss_run$quantities$DynamicNByage0[1,,1:10]
ss_run$quantities$DynamicNByage0
ss_run$quantities$DynamicNByage0[3,,1:10]
ss_run$quantities$NByage0[3,,1:10]
ss_run$quantities$NByage0[1,,1:10]
library(Rceattle)
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2060
# Write data to excel
Rceattle::write_data(data_list = BS2017SS, file = "BS2017SS.xlsx")
# Change the data how you want in excel
# Read the data back in
mydata <- Rceattle::read_data( file = "BS2017SS.xlsx")
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
mydata$fleet_control$proj_F_prop <-rep(1,7)
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 3, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
ss_run$quantities$NByage0[1,,1:10]
ss_run$quantities$DynamicNByage0[1,,1:10]
ss_run$quantities$NByage0[1,,1:10]
ss_run$quantities$DynamicNByage0[1,,1:10]
ss_run <- Rceattle::fit_mod(data_list = mydata,
inits = NULL, # Initial parameters = 0
file = NULL, # Don't save
estimateMode = 1, # Estimate hindcast only
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
phase = "default",
verbose = 1)
ss_run_dynamicTier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
DynamicHCR = TRUE, # Use dynamic reference points
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$DynamicSPR0 == ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_Tier3$quantities$SPR0 == ss_run_dynamicTier3$quantities$SPR0
ss_run_dynamicTier3$quantities$SPR0
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
ss_run_Tier3$quantities$NByage0[3,,1:10]
ss_run_Tier3$quantities$DynamicNByage0[3,,1:10]
################################################
# Alternative harvest control rules
################################################
# -- NPFMC Tier 3
ss_run_Tier3 <- Rceattle::fit_mod(data_list = mydata,
inits = ss_run$estimated_params, # Initial parameters from ss_run
estimateMode = 2, # Run projection only
HCR = build_hcr(HCR = 3, # Tier3 HCR
FXSPRtarget = 0.4, # F40%
FXSPRlimit = 0.35, # F35%
Plimit = 0.2, # No fishing when SB<SB20
Alpha = 0.05),
msmMode = 0, # Single species mode
verbose = 1)
ss_run_Tier3$quantities$SPRlimit/ss_run_Tier3$quantities$SPR0
ss_run_Tier3$quantities$DynamicSPRlimit/ss_run_Tier3$quantities$DynamicSPR0
ss_run_Tier3$quantities$DynamicSPR0 == ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_Tier3$quantities$SPR0 == ss_run_dynamicTier3$quantities$SPR0
ss_run_dynamicTier3$quantities$SPR0
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
ss_run_Tier3$quantities$NByage0[1,,1:10]
ss_run_Tier3$quantities$DynamicNByage0[1,,1:10]
ss_run_Tier3$quantities$DynamicNbyageSPR[1,1,,1:10]
ss_run_Tier3$quantities$DynamicSB0
ss_run_dynamicTier3$quantities$DynamicSB0
ss_run_dynamicTier3$quantities$DynamicSPRlimit/ss_run_dynamicTier3$quantities$DynamicSPR0
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
ss_run_Tier3$quantities$DynamicSB0
ss_run_dynamicTier3$quantities$DynamicSB0
ss_run_Tier3$quantities$SB0
ss_run_dynamicTier3$quantities$SB0
ss_run_Tier3$quantities$DynamicSB0
