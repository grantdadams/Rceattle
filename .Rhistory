BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 1)
ss_run$estimated_params$rec_pars
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 1)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = ss_run$estimated_params, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
ss_run$estimated_params$init_dev
exp(ss_run$estimated_params$init_dev)
round(exp(ss_run$estimated_params$init_dev),3)
mod_objects$quantities$NByage[,1,,1]
log(54.598)
exp(-999)
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = ss_run$estimated_params, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = ss_run$estimated_params, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
data_list <- BS2017SS
init_dev = matrix(-999, nrow = data_list$nspp, ncol = max(data_list$nages))
init_dev
init_dev = matrix(4, nrow = data_list$nspp, ncol = max(data_list$nages))
max(data_list$nages)
(data_list$nages+1):max(data_list$nages)
sapply(data_list$nages, function(x) (x+1):max(data_list$nages)
)
sapply(data_list$nages, function(x) (x+1):max(data_list$nages))
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
phase = "default",
initMode = 0)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
ss_run$estimated_params$init_dev
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 1),
phase = "default",
initMode = 1)
build_srr
devtools::document()
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 1),
phase = "default",
initMode = 1)
# Type ?fit_mod for more details
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 0),
phase = "default",
initMode = 1)
plot_biomass(list(ss_run, mod_objects))
plot_recruitment(list(ss_run, mod_objects))
# For the a multispecies model starting from the single species parameters, the following can be specified to load the data:
data("BS2017MS") # Note: the only difference is the residual mortality (M1_base) is lower
# Or we can use the previous data set
BS2017MS$projyr <- 2030
# For the a multispecies model starting from the single species parameters, the following can be specified to load the data:
data("BS2017MS") # Note: the only difference is the residual mortality (M1_base) is lower
# Or we can use the previous data set
BS2017MS$projyr <- 2030
ms_run <- Rceattle::fit_mod(data_list = BS2017MS,
inits = ss_run$estimated_params, # Initial parameters from single species ests
file = NULL, # Don't save
estimateMode = 0, # Estimate
niter = 5, # 10 iterations around population and predation dynamics
random_rec = FALSE, # No random recruitment
msmMode = 1, # MSVPA based
suitMode = 0, # empirical suitability
verbose = 1,
initMode = 0)
ms_run <- Rceattle::fit_mod(data_list = BS2017MS,
inits = ss_run$estimated_params, # Initial parameters from single species ests
file = NULL, # Don't save
estimateMode = 0, # Estimate
niter = 5, # 10 iterations around population and predation dynamics
random_rec = FALSE, # No random recruitment
msmMode = 1, # MSVPA based
suitMode = 0, # empirical suitability
verbose = 1,
initMode = 1)
curve(dnorm(x, 5, 5), from = 0 , 10)
curve(dnorm(x, 5, 5), from = 0 , 10)
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 0,
srr_use_prior = TRUE,
srr_prior_mean = 5,
srr_prior_sd = 5),
phase = "default",
initMode = 1)
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 1,
srr_use_prior = TRUE,
srr_prior_mean = 5,
srr_prior_sd = 5),
phase = "default",
initMode = 1)
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 1,
srr_use_prior = TRUE,
srr_prior_mean = 5,
srr_prior_sd = 5),
phase = "default",
initMode = 0)
curve(ss_run$estimated_params$rec_pars[1,1] * x / (1+ss_run$estimated_params$rec_pars[1,2] * x ), from = 0, to = 100)
curve(ss_run$estimated_params$rec_pars[1,1] * x / (1+ss_run$estimated_params$rec_pars[1,2] * x ), from = 0, to = 1000)
curve(ss_run$estimated_params$rec_pars[1,1] * x / (1+ss_run$estimated_params$rec_pars[1,2] * x ), from = 0, to = 1000000)
curve(ss_run$estimated_params$rec_pars[1,1] * x / (1+ss_run$estimated_params$rec_pars[1,2] * x ), from = 0, to = 10)
curve(ss_run$estimated_params$rec_pars[1,1] * x / (1+ss_run$estimated_params$rec_pars[1,2] * x ), from = 0, to = 1)
ss_run$estimated_params$rec_pars[1,1]
curve(5 * x / (1+ss_run$estimated_params$rec_pars[1,2] * x ), from = 0, to = 1)
curve(5 * x / (1+10 * x ), from = 0, to = 1)
curve(5 * x / (1+.2 * x ), from = 0, to = 1)
curve(5 * x / (1+.2 * x ), from = 0, to = 1000)
curve(5 * x / (1+.02 * x ), from = 0, to = 1000)
curve(5 * x / (1+.002 * x ), from = 0, to = 1000)
library(Rceattle)
################################################
# Setup
################################################
library(Rceattle)
################################################
# Data
################################################
# Example
# To run the 2017 single species assessment for the Bering Sea, a data file must first be loaded:
data(BS2017SS) # ?BS2017SS for more information on the data
BS2017SS$projyr <- 2030
load("~/GitHub/BS_ss_run.RData")
inits <- mod_objects$estimated_params
inits$rec_pars <- matrix(9, nrow = mod_objects$data_list$nspp, ncol = 2)
inits$rec_pars[,1] <- inits$ln_mean_rec
inits$ln_mean_rec <- NULL
################################################
# Estimation
################################################
# Then the model can be fit by setting `msmMode = 0` using the `Rceattle` function:
ss_run <- Rceattle::fit_mod(data_list = BS2017SS,
file = NULL,
inits = NULL, # Initial parameters = 0
estimateMode = 0, # Estimate
random_rec = FALSE, # No random recruitment
msmMode = 0, # Single species mode
verbose = 1,
recFun = build_srr(srr_fun = 3,
srr_use_prior = TRUE,
srr_prior_mean = 5,
srr_prior_sd = 5),
phase = "default",
initMode = 0)
curve(x*3.712354e+00*exp(--1.453893e+01 * x), from = 0, to = 1000)
curve(x*3.712354e+00*exp(--1.453893e+01 * x), from = 0, to = 1000)
curve(x*3.712354e+00*exp(--1.453893e+01 * x), from = 0, to = 100)
curve(x*3.712354e+00*exp(-1.453893e+01 * x), from = 0, to = 100)
curve(x*3.712354e+00*exp(1.453893e+01 * x), from = 0, to = 100)
curve(x*exp(3.712354e+00)*exp(-exp(-1.453893e+01) * x), from = 0, to = 100)
curve(x*exp(3.712354e+00)*exp(-exp(-1.453893e+01) * x), from = 0, to = 100000)
curve(x*exp(3.712354e+00)*exp(-exp(-1.453893e+01) * x), from = 0, to = 1000000)
curve(x*exp(3.712354e+00)*exp(-exp(-1.453893e+01) * x), from = 0, to = 10000000)
