% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/11a-run_mse.R
\name{run_mse}
\alias{run_mse}
\title{Run a management strategy evaluation}
\usage{
run_mse(
  om = ms_run,
  em = ss_run,
  nsim = 10,
  start_sim = 1,
  assessment_period = 1,
  sampling_period = 1,
  simulate_data = TRUE,
  regenerate_past = FALSE,
  sample_rec = TRUE,
  rec_trend = 0,
  fut_sample = 1,
  cap = NULL,
  catch_mult = NULL,
  seed = 666,
  regenerate_seed = seed,
  loopnum = 1,
  file = NULL,
  dir = NULL,
  timeout = 999,
  endyr = NA
)
}
\arguments{
\item{om}{CEATTLE model object exported from \code{\link{Rceattle}}}

\item{em}{CEATTLE model object exported from \code{\link{Rceattle}}}

\item{nsim}{Number of simulations to run (default 10)}

\item{start_sim}{First simulation number to start at. Useful if the code stops at specific seed/sim (default = 1).}

\item{assessment_period}{Period of years that each assessment is taken}

\item{sampling_period}{Period of years data sampling is conducted. Single value or vector the same length as the number of fleets.}

\item{simulate_data}{Include simulated random error proportional to that estimated/provided for the data from the OM.}

\item{regenerate_past}{Refits the EM to historical/conditioning data prior to the MSE, where the data are generated from the OM with \code{simulate_data = TRUE} or without \code{simulate_data = FALSE} sampling error.}

\item{sample_rec}{Include resampled recruitment deviates from the"hindcast" in the projection of the OM. Resampled deviates are used rather than sampling from N(0, sigmaR) because initial deviates bias R0 low. If false, uses mean of recruitment deviates.}

\item{rec_trend}{Linear increase or decrease in mean recruitment from \code{endyr} to \code{projyr}. This is the terminal multiplier \code{mean rec * (1 + (rec_trend/projection years) * 1:projection years)}. Can be of length 1 or of length nspp. If length 1, all species get the same trend.}

\item{fut_sample}{future sampling effort relative to last year.  \code{ Log_sd * 1 / fut_sample} for index and \code{ Sample_size * fut_sample} for comps}

\item{cap}{A cap on the catch in the projection. Can be a single number applied to all species (proportional to recommended catch) or vector of length \code{nspp} applied to each species. Default = NULL}

\item{catch_mult}{A multiplier for the catch in the projection. Can be a single number or vector of length nspp. Default = NULL}

\item{seed}{seed for the simulation}

\item{regenerate_seed}{seed for regenerating data}

\item{loopnum}{number of times to re-start optimization (where \code{loopnum=3} sometimes achieves a lower final gradient than \code{loopnum=1})}

\item{file}{(Optional) Filename where each OM simulation with EMs will be saved. If NULL, no files are saved.}

\item{dir}{(Optional) Directory where each OM simulation is saved}

\item{timeout}{length of time (minutes) estimation will run before stopping a sim (default 999 minutes)}
}
\value{
A list of operating models (differ by simulated recruitment determined by \code{nsim}) and estimation models fit to each operating model (differ by terminal year).
}
\description{
Runs a forward projecting MSE. Main assumptions are the projected selectivity/catchability, foraging days, and weight-at-age are the same as the terminal year of the hindcast in the operating model. Assumes survey sd is same as average across historic time series, while comp data sample size is same as last year. No implementation error and no observation error for catch!
}
