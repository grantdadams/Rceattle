% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/2-build_map.R
\name{build_map_selectivity}
\alias{build_map_selectivity}
\title{Helper to set map for Selectivity parameters}
\usage{
build_map_selectivity(map_list, data_list, nyrs_hind, random_sel)
}
\arguments{
\item{map_list}{The current TMB map list.}

\item{data_list}{The data list containing model settings.}

\item{nyrs_hind}{Number of historical years.}

\item{random_sel}{Logical indicating if selectivity deviations are random effects.}
}
\value{
Updated \code{map_list}.
}
\description{
Maps base selectivity parameters (\code{ln_sel_slp}, \code{sel_inf},
\code{sel_coff}) and time-varying deviations, based on \code{Selectivity}
and \code{Time_varying_sel} settings in \code{fleet_control}.

\code{Selectivity} in \code{fleet_control} of the data determines shape of selectivity curve:
0 = empirical selectivity provided in \code{emp_sel} in the data
1 = logistic selectivity
2 = non-parametric selecitivty sensu Ianelli et al 2018
3 = double logistic
4 = descending logistic
5 = non-parametric selectivity sensu Taylor et al 2014 (Hake)

\code{N_sel_bins}	Number of age/length bins to estimate non-parametric selectivity when Selectivity = 2 & 5. Not used otherwise

\code{Time_varying_sel}	determines if time-varying selectivity should be estimated for logistic, double logistic selectivity,  descending logistic , or non-parametric (\code{Selectivity = 1, 3, 4, or 5}).
0 = no
1 = penalized deviates given \code{sel_sd_prior}
3 = time blocks with no penality
4 = random walk following Dorn
5 = random walk on ascending portion of double logistic only.
NOTE: If selectivity is set to type = 2 (non-parametric) \code{sel_sd_prior} will be the 1st penalty on selectivity. \code{random_sel} treats random deviates and random walk parameters as random effects, estimating the variance.
}
