% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/0-ceattle_equations_v11.R
\name{calculate_compositions}
\alias{calculate_compositions}
\title{Calculate Age and Length Composition}
\usage{
calculate_compositions(
  comp_ctl,
  comp_n,
  comp_obs,
  F_flt_age,
  Z_at_age,
  N_at_age,
  sel,
  index_q,
  age_error,
  age_trans_matrix,
  flt_type,
  nages,
  nlengths,
  nsex,
  styr,
  nyrs_hind,
  flt_age_transition_index
)
}
\arguments{
\item{comp_ctl}{Matrix of composition control data with columns for fleet, species, sex, type and year}

\item{comp_n}{Matrix of composition sample sizes and month information}

\item{comp_obs}{}

\item{F_flt_age}{Array of fishing mortality at age by fleet}

\item{Z_at_age}{Array of total mortality at age}

\item{N_at_age}{Array of numbers at age}

\item{sel}{Array of selectivity at age}

\item{index_q}{Array of catchability coefficients}

\item{age_error}{Matrix of aging error}

\item{age_trans_matrix}{Array of age-length transition matrices}

\item{flt_type}{Vector of fleet types (1=fishery, 2=survey)}

\item{nages}{Vector of number of ages by species}

\item{nlengths}{Vector of number of lengths by species}

\item{nsex}{Vector of number of sexes by species}

\item{styr}{Start year}

\item{nyrs_hind}{Number of hindcast years}

\item{flt_age_transition_index}{Vector of indices for age transition matrices}
}
\value{
List containing:
\itemize{
\item comp_hat: Matrix of predicted compositions
\item age_hat: Matrix of predicted age compositions before aging error
\item age_obs_hat: Matrix of predicted age compositions after aging error
\item n_hat: Vector of predicted total numbers
\item true_age_comp_hat: Matrix of true age compositions
}
}
\description{
Calculates predicted age and length compositions for fishery and survey data,
accounting for aging error and sex-specific patterns.
}
\details{
This function implements the age and length composition calculations for both fishery
and survey data. It handles:
\itemize{
\item Sex-specific and combined sex compositions
\item Age and length compositions
\item Aging error
\item Age-length conversion
\item Joint sex composition data
}
}
\examples{
\dontrun{
results <- calculate_compositions(
  comp_ctl = comp_control_matrix,
  comp_n = comp_sample_sizes,
  F_flt_age = fishing_mortality,
  Z_at_age = total_mortality,
  N_at_age = numbers_at_age
)
}

}
